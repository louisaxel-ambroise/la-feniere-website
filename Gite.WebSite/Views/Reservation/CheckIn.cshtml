@model Gite.WebSite.Models.ReservationModel

@{
    ViewBag.Title = "Réserver le gîte";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var montantTotal = ViewBag.Price.Amount*2;
}

<h2>Réserver du @ViewBag.StartingOn au @ViewBag.EndingOn</h2>

<div class="well row">
    <h4>Le montant à payer sera de <strong>@montantTotal€</strong>.</h4>
    <div class="col-md-6">
        <p>
            Détails:
            <ul>
                <li>Caution: @ViewBag.Price.Amount€</li>
                <li>Prix du gîte: @ViewBag.Price.Amount€</li>
                @if (ViewBag.Price.HasDiscount)
                {
                    <li>Réduction réservation de dernière minute: -10%</li>
                }
            </ul>
        </p>
    </div>
    <div class="col-md-6">
        <p>Vous serez prévenus par e-mail lorsque votre virement aura été accepté.</p>
        <p><strong>Les chèques ne sont pas acceptés.<br/>Les paiements se font uniquement par virement bancaire.</strong></p>
    </div>
</div>
@using (Html.BeginForm("CheckIn", "Reservation", new { Id = ViewBag.ReservationId }, FormMethod.Post, null))
{
    @Html.ValidationSummary(true)
    @Html.HiddenFor(x => x.Price, new { id = ViewBag.Price })
    <div class="row">
        <div class="col-md-6">
            <h4>Vos coordonnées:</h4>
            <div class="form-group">
                <label for="name">Votre nom:</label>
                @Html.TextBoxFor(x => x.Name, new { id = "name", @class = "form-control", placeholder = "name" })
            </div>
            <div class="form-group">
                <label for="email">Votre adresse e-mail:</label>
                @Html.TextBoxFor(x => x.Email, new { id = "email", @class = "form-control", placeholder = "e-mail" })
            </div>
            <div class="form-group">
                <label for="phone">Votre numéro de téléphone:</label>
                @Html.TextBoxFor(x => x.Phone, new { id = "phone", @class = "form-control", placeholder = "Téléphone" })
            </div>
        </div>
        <div class="col-md-6">
            <h4>Votre adresse:</h4>
            <div class="form-group">
                <label for="address">Rue:</label>
                @Html.TextBoxFor(x => x.Street, new { id = "address", @class = "form-control", placeholder = "Rue" })
            </div>
            <div class="form-group">
                <label for="city">Ville:</label>
                @Html.TextBoxFor(x => x.City, new { id = "city", @class = "form-control", placeholder = "Ville" })
            </div>
            <div class="form-group">
                <label for="zipcode">Code postal:</label>
                @Html.TextBoxFor(x => x.ZipCode, new { id = "zipcode", @class = "form-control", placeholder = "Code Postal" })
            </div>
            <div class="form-group">
                <label for="country">Pays:</label>
                @Html.TextBoxFor(x => x.Country, new { id = "country", @class = "form-control", placeholder = "Pays" })
            </div>
        </div>
    </div>
    <div class="row well">
        <p>Une fois votre réservation validée, vous aurez 15 jours pour effectuer votre virement. Au delà de ce délai, la semaine sera à nouveau disponible à la réservation.</p>
    </div>
    <div class="row">
        <div class="col-sm-11">
            <div class="pull-right">
                <input type="submit" class="btn btn-primary" value="Valider ma réservation" />
                <input type="reset" class="btn btn-danger" value="Annuler" />
            </div>
        </div>
    </div>
}